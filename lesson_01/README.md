# Урок 1 
## С чего начать? (Проблема чистого листа)

Можно начать с вопроса:

### Что надо получить?

Тут, чаще всего, два варианта: 

- Программу
- Библиотеку


## Что такое программа?
Это самостоятельное приложение, которое:

- имеет точку входа (main()),
- выполняется самостоятельно,
- решает конкретную задачу (например, текстовый редактор, калькулятор и т.д.)

``` 
Программа запускается, делает работу, завершается.
```

## Что такое библиотека?
Это набор функций, классов или модулей, предназначенных для использования внутри других программ. Могут быть статическими или динмаческими.

**Артефакты знаний по библиотека:**

```
Библиотека не содержит main()
```

```
Библиотека не запускается сама
```

```
Библиотека предоставляет API (функций, классы или модули) для использования
```

```
Программа, подключая библиотеку, получает доступ к ее API 
```

```
Библиотека может использоваться повторно в разных проектах.
```

## Понимание типов библиотек
- ### Статическая
    - **Компиляция:** 
    Когда компилируем статическую библиотеку с программой, то на выходе получаем один исполняемый файл, куда библиотека будет "встроена", и 

        ```
        библиотека 
                   \
                    \
                      --> скомп.программа
                    /
                   /
         программа
        ```
    - **Запуск:** Когда мы будем запускать нашу программу, на этапе запуска, ему не надо подтягивать файлы библиотеки, они уже были "вшиты" в программу на этапе компиляции.
        ```
        Запуск --> скомп.программа
        ```

    - **Перемещение:** При перемещении нашей скомп.программы, нам не надо будет вместе с ним тянуть файл библиотеки


- ### динамическая
    - **Компиляция:** 
        Когда компилируем динамическую библиотеку с программой, то исполняемый файл на выходе будет требовать файл нашей библиотеки. Библиотека не будет "встроена" как в случае со статической

        ```
        библиотека 
             |
             |
             |
         программа  --> скомп.программа
        ```
    - **Запуск:** Когда мы будем запускать нашу программу, ему надо будет иметь доступ к файлам библиотеки, они не были "вшиты" в программу, как статические либы.
        ```
                   файл библиотеки (libmathlib.so)
                        |
                        |
        Запуск --> скомп.программа
        ```
    - **Перемещение:** При перемещении нашей скомп.программы, нам надо будет вместе с ним тянуть файл библиотеки


## Квест-вопросы
- Мы делаем программу для Линукс, и она использует библиотеку OpenSSL. Какой тип библиотек использовать при компиляции нашей программы?

- Мы делаем программу для Игрового автомат, то есть программа будет запускаться на микроконтроллере этого атвомата, где нет никаких системных библиотек. Наша программа использует библиотеку SDL для работы со звуком. Какой тип библиотек использовать при компиляции нашей программы?


## Делаем библиотеку
Создадим для примера условную библиотеку mathlib с арифметическими функциями. Библиотека будет иметь заголовчный файл и файл реализации

*для примера реализуем библиотеку с арифметическими операциями*

### Заголовочный файл (.h или .hpp)
Это объявления (интерфейс):

```cpp
// mathlib.hpp
int add(int a, int b);
```

### Файл реализации (.cpp)
Это определения функций (реализация):

```cpp
// mathlib.cpp
int add(int a, int b) {
    return a + b;
}
```

## Как используются библиотеки?
Во время написания програм, подключаем через include:
```cpp
#include "mathlib.hpp"  // подключаем библиотеку

int main() {
    int result = add(2, 3);  // используем функцию из библиотеки
}
```

## Компилируем без библиотеки:
```bash
g++ main.cpp mathlib.cpp -o myprogram
```

## Компилируем с библиотекой:
### Статическая
Если будем собирать программу со статической либой, то надо сначала собрать отдельно библиотеку, а затем скомпилировать программу с этой библиотекой

#### 1. Сборка статической библиотеки:        
```bash
g++ -c mathlib.cpp   # создаёт mathlib.o
ar rcs libmathlib.a mathlib.o  # создаёт статическую библиотеку
```

```g++``` — компилятор C++.

```-c``` означает compile only: компилирует mathlib.cpp в объектный файл mathlib.o. Не линкует.

```-o mathlib.o``` — имя выходного файла.

```ar``` — архиватор для создания статических библиотек.

```r``` — replace: заменить файл, если он уже есть в архиве.

```c``` — create: создать архив, если его ещё нет.

```s``` — index: создать индекс символов для быстрой линковки.

```libmathlib.a``` — имя итоговой библиотеки.

#### 2. Компиляция программы со статической библиотекой:

```bash
g++ main.cpp -L. -lmathlib -o myprogram
```

```main.cpp``` — основной исходный файл.

```-L.``` — Library path: говорит компилятору искать библиотеки в текущей папке (.).

```-lmathlib``` — link library: подключить libmathlib.a. Префикс lib и суффикс .a добавляются автоматически.

```-o myprogram``` — имя выходного исполняемого файла.

### Динамическая
Если будем собирать программу с динамической либой, то также надо сначала собрать отдельно библиотеку, а затем скомпилировать программу с указанием нащей библиотеки

#### 1. Сборка динамической библиотеки:
```bash
g++ -fPIC -c mathlib.cpp -o mathlib.o
g++ -shared -o libmathlib.so mathlib.o
```

```g++``` — компилятор C++.

```-c``` означает compile only: компилирует mathlib.cpp в объектный файл mathlib.o. Не линкует.

```-o mathlib.o``` — имя выходного файла.

```-fPIC``` — Position Independent Code: позволяет скомпилированному коду работать в любой области памяти, обязательно для .so..

```-shared``` — создаёт динамическую (разделяемую) библиотеку .so.

```-o libmathlib.so``` — имя файла вывода.

#### 2. Компиляция программы с динамической библиотекой:

```bash
g++ main.cpp -L. -lmathlib -o myprogram
```

```main.cpp``` — основной исходный файл.

```-L.``` — Library path: говорит компилятору искать библиотеки в текущей папке (.).

```-lmathlib``` — link library: подключить libmathlib.a. Префикс lib и суффикс .a добавляются автоматически.

```-o myprogram``` — имя выходного исполняемого файла.

### Итого
|Вид библиотеки          |Расширение                    |Когда подключается  |
|---          |---                           |---                 |
|Статическая  |.a (Linux),<br>.lib (Windows) |на этапе компиляции |
|Динамическая |.so (Linux), .dll (Windows)   |на этапе запуска    |


<br>
<br>
<br>

# PART 2
## C++ и ООП
До ООП: процедурное программирование
В 60–70-х годах большинство языков (C, Fortran, Pascal) были процедурными:

Код разбивался на функции и структуры данных

Данные и логика были раздельны

Программы росли, становились всё сложнее, а поддержка — всё больнее